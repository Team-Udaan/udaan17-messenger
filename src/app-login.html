<dom-module id="app-login">

  <template>
    <style>
      :host {
        display: block;
      }

      .card-container {
        @apply(--layout-vertical);
        @apply(--layout-center);
      }

      paper-card {
        width: 40%;
        margin-top: 30px;
        --paper-card-header-color: var(--primary-color);
        @apply(--layout-vertical);
        padding: 20px;
      }

      paper-button {
        @apply(--action-button);
        @apply(--layout-flex);
        margin-top: 20px;
        text-align: center;
        padding: 20px;
      }

      iron-icon {
        @apply(--icon);
      }

      paper-toast {
        background-color: var(--danger-color);
        color: white;
      }
    </style>

    <app-location route="{{route}}" use-hash-as-path></app-location>

    <div class="card-container">
      <paper-card heading="Login">
        <div class="card-content">
          <paper-input type="text" label="Email ID" value="{{email}}" autocompelete autofocus>
            <iron-icon icon="mail" suffix></iron-icon>
          </paper-input>
          <paper-input type="password" label="Password" value="{{password}}"></paper-input>
        </div>
        <paper-button on-tap="login">Login</paper-button>
      </paper-card>
    </div>

    <paper-toast id="errorToast" duration="3000"></paper-toast>


  </template>

  <script>
    Polymer({

      is: 'app-login',

      login: function () {
        if (!this.email) {
          this.$.errorToast.text = "Email Id is required";
          this.$.errorToast.open();
        }
        else if(!/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/.test(this.email)) {
          this.$.errorToast.text = "Enter a proper Email ID"
          this.$.errorToast.open();
        }
        else if (!this.password) {
          this.$.errorToast.text = "Password is required";
          this.$.errorToast.open();
        }
        else this.set('route.path', '/current')
      }

    });
  </script>

</dom-module>
